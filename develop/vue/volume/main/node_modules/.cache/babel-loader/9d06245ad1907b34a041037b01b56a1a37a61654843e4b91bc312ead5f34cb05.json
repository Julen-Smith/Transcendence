{"ast":null,"code":"//import router from '@/router';\nimport axiosInstance from '../axiosService';\n//import axios from 'axios';\n\nasync function postGateway(endpoint) {\n  axiosInstance.post(endpoint, {\n    timeout: 1000\n  }).then(response => {\n    console.log(\"Succesful POST request: \", response);\n  }).catch(error => {\n    console.error(\"Error in POST request: \", error);\n  });\n}\nasync function getGateway(endpoint) {\n  try {\n    const res = await axiosInstance.get(endpoint, {\n      timeout: 1000\n    });\n    return res.data.url;\n  } catch (error) {\n    console.error(\"Error in GET request: \", error);\n    return null;\n  }\n}\n\n//RegisterView @POST /create_user\nasync function register(credentials) {\n  try {\n    const response = await axiosInstance.post('/login/register', credentials);\n    return {\n      success: true,\n      data: response.data,\n      error: null\n    };\n  } catch (error) {\n    return {\n      success: false,\n      data: null,\n      error: error.response.data.detail || 'Error desconocido.'\n    };\n  }\n}\n\n//LoginView @POST /login_user\nasync function login(credentials) {\n  try {\n    const response = await axiosInstance.post('/login/default', credentials);\n    return {\n      success: true,\n      data: response.data,\n      error: null\n    };\n  } catch (error) {\n    if (error.response) {\n      //return { success: false, data: null, error: 'Necesita verificación OTP', status: 428 };\n      return {\n        success: false,\n        data: null,\n        error: error.response.data.detail || 'Error desconocido.'\n      };\n    } else {\n      console.error(\"Error making the request:\", error);\n      return {\n        success: false,\n        data: null,\n        error: 'Necesita verificación OTP',\n        status: 428\n      };\n      //return { success: false, data: null, error: 'Error de red o desconocido.' };\n    }\n  }\n}\nasync function handleIntraRedirect() {\n  try {\n    // Peticion de build url al back\n    // const response = await axios.get('http://localhost:4242/api/intra');\n    // Redireccion a la url\n    window.location.href = 'http://localhost:4242/api/intra';\n  } catch (error) {\n    console.error('Error al manejar el inicio de sesión con Intra 42:', error);\n  }\n}\nexport { handleIntraRedirect, register, login, postGateway, getGateway };","map":{"version":3,"names":["axiosInstance","postGateway","endpoint","post","timeout","then","response","console","log","catch","error","getGateway","res","get","data","url","register","credentials","success","detail","login","status","handleIntraRedirect","window","location","href"],"sources":["/Transcendence/develop/vue/volume/main/src/methods/api/login.js"],"sourcesContent":["//import router from '@/router';\nimport axiosInstance from '../axiosService';\n//import axios from 'axios';\n\n\n\nasync function postGateway(endpoint) {\n  axiosInstance.post(endpoint, {timeout: 1000})\n  .then((response) => {\n    console.log(\"Succesful POST request: \", response);\n  })\n  .catch((error) => {\n    console.error(\"Error in POST request: \", error);\n  });\n}\n\nasync function getGateway(endpoint) {\n  try {\n\n    const res = await axiosInstance.get(endpoint, {timeout: 1000});\n    return res.data.url;\n\n  } catch (error) {\n\n      console.error(\"Error in GET request: \", error);\n      return null;\n  }\n}\n\n\n//RegisterView @POST /create_user\nasync function register(credentials) {\n    try {\n        const response = await axiosInstance.post('/login/register', credentials);\n        return { success: true, data: response.data, error: null };\n\n    } catch (error) {\n        return { success: false, data: null, error: error.response.data.detail || 'Error desconocido.' };\n    }\n}\n\n//LoginView @POST /login_user\nasync function login(credentials) {\n  try {\n      const response = await axiosInstance.post('/login/default', credentials);\n      return { success: true, data: response.data, error: null };\n  } catch (error) {\n      if (error.response) {\n        //return { success: false, data: null, error: 'Necesita verificación OTP', status: 428 };\n        return { success: false, data: null, error: error.response.data.detail || 'Error desconocido.' };\n      } else {\n          console.error(\"Error making the request:\", error);\n          return { success: false, data: null, error: 'Necesita verificación OTP', status: 428 };\n          //return { success: false, data: null, error: 'Error de red o desconocido.' };\n      }\n  }\n}\n\nasync function handleIntraRedirect() {\n    try {\n      // Peticion de build url al back\n     // const response = await axios.get('http://localhost:4242/api/intra');\n      // Redireccion a la url\n      window.location.href = 'http://localhost:4242/api/intra';\n    \n    } catch (error) {\n      console.error('Error al manejar el inicio de sesión con Intra 42:', error);\n    }\n}\n\n\nexport { handleIntraRedirect, register, login,\n  postGateway, getGateway};\n"],"mappings":"AAAA;AACA,OAAOA,aAAa,MAAM,iBAAiB;AAC3C;;AAIA,eAAeC,WAAWA,CAACC,QAAQ,EAAE;EACnCF,aAAa,CAACG,IAAI,CAACD,QAAQ,EAAE;IAACE,OAAO,EAAE;EAAI,CAAC,CAAC,CAC5CC,IAAI,CAAEC,QAAQ,IAAK;IAClBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,QAAQ,CAAC;EACnD,CAAC,CAAC,CACDG,KAAK,CAAEC,KAAK,IAAK;IAChBH,OAAO,CAACG,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;EACjD,CAAC,CAAC;AACJ;AAEA,eAAeC,UAAUA,CAACT,QAAQ,EAAE;EAClC,IAAI;IAEF,MAAMU,GAAG,GAAG,MAAMZ,aAAa,CAACa,GAAG,CAACX,QAAQ,EAAE;MAACE,OAAO,EAAE;IAAI,CAAC,CAAC;IAC9D,OAAOQ,GAAG,CAACE,IAAI,CAACC,GAAG;EAErB,CAAC,CAAC,OAAOL,KAAK,EAAE;IAEZH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC9C,OAAO,IAAI;EACf;AACF;;AAGA;AACA,eAAeM,QAAQA,CAACC,WAAW,EAAE;EACjC,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAMN,aAAa,CAACG,IAAI,CAAC,iBAAiB,EAAEc,WAAW,CAAC;IACzE,OAAO;MAAEC,OAAO,EAAE,IAAI;MAAEJ,IAAI,EAAER,QAAQ,CAACQ,IAAI;MAAEJ,KAAK,EAAE;IAAK,CAAC;EAE9D,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZ,OAAO;MAAEQ,OAAO,EAAE,KAAK;MAAEJ,IAAI,EAAE,IAAI;MAAEJ,KAAK,EAAEA,KAAK,CAACJ,QAAQ,CAACQ,IAAI,CAACK,MAAM,IAAI;IAAqB,CAAC;EACpG;AACJ;;AAEA;AACA,eAAeC,KAAKA,CAACH,WAAW,EAAE;EAChC,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAMN,aAAa,CAACG,IAAI,CAAC,gBAAgB,EAAEc,WAAW,CAAC;IACxE,OAAO;MAAEC,OAAO,EAAE,IAAI;MAAEJ,IAAI,EAAER,QAAQ,CAACQ,IAAI;MAAEJ,KAAK,EAAE;IAAK,CAAC;EAC9D,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACJ,QAAQ,EAAE;MAClB;MACA,OAAO;QAAEY,OAAO,EAAE,KAAK;QAAEJ,IAAI,EAAE,IAAI;QAAEJ,KAAK,EAAEA,KAAK,CAACJ,QAAQ,CAACQ,IAAI,CAACK,MAAM,IAAI;MAAqB,CAAC;IAClG,CAAC,MAAM;MACHZ,OAAO,CAACG,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,OAAO;QAAEQ,OAAO,EAAE,KAAK;QAAEJ,IAAI,EAAE,IAAI;QAAEJ,KAAK,EAAE,2BAA2B;QAAEW,MAAM,EAAE;MAAI,CAAC;MACtF;IACJ;EACJ;AACF;AAEA,eAAeC,mBAAmBA,CAAA,EAAG;EACjC,IAAI;IACF;IACD;IACC;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,iCAAiC;EAE1D,CAAC,CAAC,OAAOf,KAAK,EAAE;IACdH,OAAO,CAACG,KAAK,CAAC,oDAAoD,EAAEA,KAAK,CAAC;EAC5E;AACJ;AAGA,SAASY,mBAAmB,EAAEN,QAAQ,EAAEI,KAAK,EAC3CnB,WAAW,EAAEU,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}