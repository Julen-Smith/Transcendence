{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"login-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-info\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"login-form\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Iniciar Sesión\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"Usuario:\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Contraseña:\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Iniciar Sesión\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_DefaultNavbar = _resolveComponent(\"DefaultNavbar\");\n  const _component_GoogleLogin = _resolveComponent(\"GoogleLogin\");\n  const _component_PopUpError = _resolveComponent(\"PopUpError\");\n  const _component_OTPVerification = _resolveComponent(\"OTPVerification\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_DefaultNavbar), !_ctx.showOTPVerification ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleLogin && $options.handleLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.credentials.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.username]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.credentials.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.password]])]), _hoisted_9], 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"button_intra\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.redirectToIntra && $options.redirectToIntra(...args))\n  }, \"Entrar con Intra 42\")]), _createVNode(_component_GoogleLogin)])])) : _createCommentVNode(\"v-if\", true), $setup.popupTriggers.responseTrigger ? (_openBlock(), _createBlock(_component_PopUpError, {\n    key: 1,\n    \"error-message\": $setup.errorMessage,\n    onClose: _cache[4] || (_cache[4] = $event => $setup.popupTriggers.responseTrigger = false)\n  }, null, 8 /* PROPS */, [\"error-message\"])) : _createCommentVNode(\"v-if\", true), _ctx.showOTPVerification ? (_openBlock(), _createBlock(_component_OTPVerification, {\n    key: 2\n  })) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementVNode","for","type","_createElementBlock","_Fragment","_createVNode","_component_DefaultNavbar","_ctx","showOTPVerification","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","handleLogin","_hoisted_5","_hoisted_6","id","$event","$setup","credentials","username","_hoisted_7","_hoisted_8","password","_hoisted_9","onClick","redirectToIntra","_component_GoogleLogin","_createCommentVNode","popupTriggers","responseTrigger","_createBlock","_component_PopUpError","errorMessage","onClose","_component_OTPVerification"],"sources":["C:\\Users\\Julen\\Documents\\Transcendence\\develop\\vue\\volume\\main\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n \r\n  <DefaultNavbar></DefaultNavbar>\r\n\r\n  <div class=\"login-container\" v-if=\"!showOTPVerification\">\r\n    <div class=\"login-info\">\r\n    </div>\r\n    <div class=\"login-form\">\r\n      <h2>Iniciar Sesión</h2>\r\n      <form @submit.prevent=\"handleLogin\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Usuario:</label>\r\n          <input type=\"text\" id=\"username\" v-model=\"credentials.username\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Contraseña:</label>\r\n          <input type=\"password\" id=\"password\" v-model=\"credentials.password\">\r\n        </div>\r\n        <button type=\"submit\">Iniciar Sesión</button>\r\n      </form>\r\n        <div>\r\n          <button class=\"button_intra\" @click=\"redirectToIntra\">Entrar con Intra 42</button>\r\n        </div>\r\n      <GoogleLogin></GoogleLogin>\r\n    </div>\r\n  </div>\r\n\r\n  <PopUpError v-if=\"popupTriggers.responseTrigger\" :error-message=\"errorMessage\" @close=\"popupTriggers.responseTrigger = false\"></PopUpError>\r\n  \r\n  <OTPVerification v-if=\"showOTPVerification\"></OTPVerification>\r\n\r\n</template>\r\n  \r\n<script>\r\n\r\nimport GoogleLogin from '@/components/GoogleLogin.vue';\r\nimport DefaultNavbar from '@/components/DefaultNavbar.vue';\r\nimport VueCookies from 'vue-cookies';\r\nimport OTPVerification from '@/components/OtpVerification.vue';\r\nimport PopUpError from '@/components/PopUpError.vue';\r\nimport { login } from '@/methods/api/login.js';\r\nimport { handleIntraRedirect } from '@/methods/api/login.js';\r\nimport { ref } from 'vue';\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  components: { GoogleLogin, DefaultNavbar, OTPVerification, PopUpError },\r\n  setup() {\r\n    const errorMessage = ref('');\r\n    const popupTriggers = ref({\r\n      responseTrigger: false,\r\n      timmedTrigger: false\r\n    });\r\n    const credentials = ref({\r\n      username: '',\r\n      password: ''\r\n    });\r\n    return { credentials , popupTriggers, errorMessage};\r\n  },\r\n  methods: \r\n  {\r\n    async handleLogin() {\r\n      const { success, error } = await login(this.credentials);\r\n      if (!success) {\r\n        this.errorMessage = error;\r\n        this.popupTriggers.responseTrigger = true;\r\n      } else {\r\n        //this.showOTPVerification = true;\r\n        this.$router.push('/lobby');\r\n        VueCookies.set('session_cookie', 'futurojwt', '3600000');\r\n      }\r\n    },\r\n    async redirectToIntra () {\r\n      handleIntraRedirect();\r\n    }\r\n  }\r\n};\r\n\r\n//definir funcion y redirigir a handleintralogin() de login.js\r\n//def handleIntraLogin()\r\n\r\n</script>\r\n  \r\n<style scoped>\r\n\r\n.login-container\r\n{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n    \r\n.login-form \r\n{\r\n  width: 15%;\r\n  padding: 20px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  width:50vh;\r\n}\r\n  \r\n.form-group \r\n{\r\n    margin-bottom: 15px;\r\n}\r\n  \r\nlabel \r\n{\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n  \r\ninput[type=\"text\"], input[type=\"password\"] \r\n{\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n  \r\nbutton \r\n{\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  margin: 10px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n}\r\n\r\nbutton:hover \r\n{\r\n  background-color: #45a049;\r\n}\r\n\r\n  .button_intra{\r\n  background-color: black;\r\n  color: white;\r\n  padding: 10px 15px;\r\n  margin-top: 10px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  hover: \r\n}\r\n.button_intra:hover {\r\n  background-color: black; \r\n}\r\n\r\n\r\n\r\n\r\n</style>\r\n  "],"mappings":";;;EAAAA,GAAA;EAIOC,KAAK,EAAC;;gEACTC,mBAAA,CACM;EADDD,KAAK,EAAC;AAAY;;EAElBA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAuB,YAAnB,gBAAc;;EAEXD,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAsC;EAA/BC,GAAG,EAAC;AAAU,GAAC,UAAQ;;EAG3BF,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAyC;EAAlCC,GAAG,EAAC;AAAU,GAAC,aAAW;gEAGnCD,mBAAA,CAA6C;EAArCE,IAAI,EAAC;AAAQ,GAAC,gBAAc;;;;;;uBAlB5CC,mBAAA,CAAAC,SAAA,SAEEC,YAAA,CAA+BC,wBAAA,G,CAEKC,IAAA,CAAAC,mBAAmB,I,cAAvDL,mBAAA,CAqBM,OArBNM,UAqBM,GApBJC,UACM,EACNV,mBAAA,CAiBM,OAjBNW,UAiBM,GAhBJC,UAAuB,EACvBZ,mBAAA,CAUO;IAVAa,QAAM,EAAAC,MAAA,QAAAA,MAAA,MATnBC,cAAA,KAAAC,IAAA,KAS6BC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;MAChChB,mBAAA,CAGM,OAHNmB,UAGM,GAFJC,UAAsC,E,gBACtCpB,mBAAA,CAAgE;IAAzDE,IAAI,EAAC,MAAM;IAACmB,EAAE,EAAC,UAAU;IAZ1C,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAYoDC,MAAA,CAAAC,WAAW,CAACC,QAAQ,GAAAH,MAAA;iDAApBC,MAAA,CAAAC,WAAW,CAACC,QAAQ,E,KAEhEzB,mBAAA,CAGM,OAHN0B,UAGM,GAFJC,UAAyC,E,gBACzC3B,mBAAA,CAAoE;IAA7DE,IAAI,EAAC,UAAU;IAACmB,EAAE,EAAC,UAAU;IAhB9C,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAgBwDC,MAAA,CAAAC,WAAW,CAACI,QAAQ,GAAAN,MAAA;iDAApBC,MAAA,CAAAC,WAAW,CAACI,QAAQ,E,KAEpEC,UAA6C,C,4BAE7C7B,mBAAA,CAEM,cADJA,mBAAA,CAAkF;IAA1ED,KAAK,EAAC,cAAc;IAAE+B,OAAK,EAAAhB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAc,eAAA,IAAAd,QAAA,CAAAc,eAAA,IAAAf,IAAA,CAAe;KAAE,qBAAmB,E,GAE7EX,YAAA,CAA2B2B,sBAAA,E,OAvBjCC,mBAAA,gBA2BoBV,MAAA,CAAAW,aAAa,CAACC,eAAe,I,cAA/CC,YAAA,CAA2IC,qBAAA;IA3B7IvC,GAAA;IA2BoD,eAAa,EAAEyB,MAAA,CAAAe,YAAY;IAAGC,OAAK,EAAAzB,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAAEC,MAAA,CAAAW,aAAa,CAACC,eAAe;gDA3BtHF,mBAAA,gBA6ByB1B,IAAA,CAAAC,mBAAmB,I,cAA1C4B,YAAA,CAA8DI,0BAAA;IA7BhE1C,GAAA;EAAA,MAAAmC,mBAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}