{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"login-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-info\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"login-form\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Iniciar Sesión\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"Usuario:\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Contraseña:\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Iniciar Sesión\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_DefaultNavbar = _resolveComponent(\"DefaultNavbar\");\n  const _component_GoogleLogin = _resolveComponent(\"GoogleLogin\");\n  const _component_PopUpError = _resolveComponent(\"PopUpError\");\n  const _component_OTPVerification = _resolveComponent(\"OTPVerification\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_DefaultNavbar), !$setup.showOTPVerification ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleLogin && $options.handleLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.credentials.username = $event),\n    autocomplete: \"username\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.username]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.credentials.password = $event),\n    autocomplete: \"current-password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.password]])]), _hoisted_9], 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"button_intra\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.redirectToIntra && $options.redirectToIntra(...args))\n  }, \"Entrar con Intra 42\")]), _createVNode(_component_GoogleLogin)])])) : _createCommentVNode(\"v-if\", true), $setup.popupTriggers.responseTrigger ? (_openBlock(), _createBlock(_component_PopUpError, {\n    key: 1,\n    \"error-message\": $setup.errorMessage,\n    onClose: _cache[4] || (_cache[4] = $event => $setup.popupTriggers.responseTrigger = false)\n  }, null, 8 /* PROPS */, [\"error-message\"])) : _createCommentVNode(\"v-if\", true), $setup.showOTPVerification ? (_openBlock(), _createBlock(_component_OTPVerification, {\n    key: 2\n  })) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementVNode","for","type","_createElementBlock","_Fragment","_createVNode","_component_DefaultNavbar","$setup","showOTPVerification","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","handleLogin","_hoisted_5","_hoisted_6","id","$event","credentials","username","autocomplete","_hoisted_7","_hoisted_8","password","_hoisted_9","onClick","redirectToIntra","_component_GoogleLogin","_createCommentVNode","popupTriggers","responseTrigger","_createBlock","_component_PopUpError","errorMessage","onClose","_component_OTPVerification"],"sources":["/Transcendence/develop/vue/volume/main/src/views/LoginView.vue"],"sourcesContent":["<template>\n \n  <DefaultNavbar></DefaultNavbar>\n\n  <div class=\"login-container\" v-if=\"!showOTPVerification\">\n    <div class=\"login-info\">\n    </div>\n    <div class=\"login-form\">\n      <h2>Iniciar Sesión</h2>\n      <form @submit.prevent=\"handleLogin\">\n        <div class=\"form-group\">\n          <label for=\"username\">Usuario:</label>\n          <input type=\"text\" id=\"username\" v-model=\"credentials.username\" autocomplete=\"username\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\">Contraseña:</label>\n          <input type=\"password\" id=\"password\" v-model=\"credentials.password\" autocomplete=\"current-password\">\n        </div>\n        <button type=\"submit\">Iniciar Sesión</button>\n      </form>\n        <div>\n          <button class=\"button_intra\" @click=\"redirectToIntra\">Entrar con Intra 42</button>\n        </div>\n      <GoogleLogin></GoogleLogin>\n    </div>\n  </div>\n\n  <PopUpError v-if=\"popupTriggers.responseTrigger\" :error-message=\"errorMessage\" @close=\"popupTriggers.responseTrigger = false\"></PopUpError>\n  \n  <OTPVerification v-if=\"showOTPVerification\"></OTPVerification>\n\n</template>\n  \n<script>\n\nimport GoogleLogin from '@/components/GoogleLogin.vue';\nimport DefaultNavbar from '@/components/DefaultNavbar.vue';\nimport OTPVerification from '@/components/OtpVerification.vue';\nimport PopUpError from '@/components/PopUpError.vue';\nimport { login } from '@/methods/api/login.js';\nimport { handleIntraRedirect } from '@/methods/api/login.js';\nimport { ref } from 'vue';\n\n\nexport default {\n  name: 'LoginView',\n  components: { GoogleLogin, DefaultNavbar, OTPVerification, PopUpError },\n  setup() {\n    const errorMessage = ref('');\n    const popupTriggers = ref({\n      responseTrigger: false,\n      timmedTrigger: false\n    });\n    const credentials = ref({\n      username: '',\n      password: ''\n    });\n    const showOTPVerification = ref(false);\n    return { credentials , popupTriggers, errorMessage, showOTPVerification };\n  },\n  methods: \n  {\n    async handleLogin() {\n      try {\n      const { success, error, status } = await login(this.credentials);\n      if (!success) {\n        if (status == 428)\n          this.showOTPVerification = true;\n        else\n        {\n          this.errorMessage = error;\n          this.popupTriggers.responseTrigger = true;\n        }\n      } else {\n        this.$router.push('/lobby');\n      }\n    } catch (error) {\n    console.error('Error during login:', error);\n    // Maneja el error como consideres necesario\n    }\n    },\n    async redirectToIntra () {\n      handleIntraRedirect();\n    }\n  }\n};\n\n\n</script>\n  \n<style scoped>\n\n.login-container\n{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n    \n.login-form \n{\n  width: 15%;\n  padding: 20px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  width:50vh;\n}\n  \n.form-group \n{\n    margin-bottom: 15px;\n}\n  \nlabel \n{\n  display: block;\n  margin-bottom: 5px;\n}\n  \ninput[type=\"text\"], input[type=\"password\"] \n{\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n  \nbutton \n{\n  background-color: #4CAF50;\n  color: white;\n  padding: 10px 15px;\n  margin: 10px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 100%;\n}\n\nbutton:hover \n{\n  background-color: #45a049;\n}\n\n  .button_intra{\n  background-color: black;\n  color: white;\n  padding: 10px 15px;\n  margin-top: 10px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 100%;\n}\n.button_intra:hover {\n  background-color: black; \n}\n\n\n\n\n</style>\n  "],"mappings":";;;EAAAA,GAAA;EAIOC,KAAK,EAAC;;gEACTC,mBAAA,CACM;EADDD,KAAK,EAAC;AAAY;;EAElBA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAuB,YAAnB,gBAAc;;EAEXD,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAsC;EAA/BC,GAAG,EAAC;AAAU,GAAC,UAAQ;;EAG3BF,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAyC;EAAlCC,GAAG,EAAC;AAAU,GAAC,aAAW;gEAGnCD,mBAAA,CAA6C;EAArCE,IAAI,EAAC;AAAQ,GAAC,gBAAc;;;;;;uBAlB5CC,mBAAA,CAAAC,SAAA,SAEEC,YAAA,CAA+BC,wBAAA,G,CAEKC,MAAA,CAAAC,mBAAmB,I,cAAvDL,mBAAA,CAqBM,OArBNM,UAqBM,GApBJC,UACM,EACNV,mBAAA,CAiBM,OAjBNW,UAiBM,GAhBJC,UAAuB,EACvBZ,mBAAA,CAUO;IAVAa,QAAM,EAAAC,MAAA,QAAAA,MAAA,MATnBC,cAAA,KAAAC,IAAA,KAS6BC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;MAChChB,mBAAA,CAGM,OAHNmB,UAGM,GAFJC,UAAsC,E,gBACtCpB,mBAAA,CAAwF;IAAjFE,IAAI,EAAC,MAAM;IAACmB,EAAE,EAAC,UAAU;IAZ1C,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAYoDf,MAAA,CAAAgB,WAAW,CAACC,QAAQ,GAAAF,MAAA;IAAEG,YAAY,EAAC;iDAAnClB,MAAA,CAAAgB,WAAW,CAACC,QAAQ,E,KAEhExB,mBAAA,CAGM,OAHN0B,UAGM,GAFJC,UAAyC,E,gBACzC3B,mBAAA,CAAoG;IAA7FE,IAAI,EAAC,UAAU;IAACmB,EAAE,EAAC,UAAU;IAhB9C,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAgBwDf,MAAA,CAAAgB,WAAW,CAACK,QAAQ,GAAAN,MAAA;IAAEG,YAAY,EAAC;iDAAnClB,MAAA,CAAAgB,WAAW,CAACK,QAAQ,E,KAEpEC,UAA6C,C,4BAE7C7B,mBAAA,CAEM,cADJA,mBAAA,CAAkF;IAA1ED,KAAK,EAAC,cAAc;IAAE+B,OAAK,EAAAhB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAc,eAAA,IAAAd,QAAA,CAAAc,eAAA,IAAAf,IAAA,CAAe;KAAE,qBAAmB,E,GAE7EX,YAAA,CAA2B2B,sBAAA,E,OAvBjCC,mBAAA,gBA2BoB1B,MAAA,CAAA2B,aAAa,CAACC,eAAe,I,cAA/CC,YAAA,CAA2IC,qBAAA;IA3B7IvC,GAAA;IA2BoD,eAAa,EAAES,MAAA,CAAA+B,YAAY;IAAGC,OAAK,EAAAzB,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAAEf,MAAA,CAAA2B,aAAa,CAACC,eAAe;gDA3BtHF,mBAAA,gBA6ByB1B,MAAA,CAAAC,mBAAmB,I,cAA1C4B,YAAA,CAA8DI,0BAAA;IA7BhE1C,GAAA;EAAA,MAAAmC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}