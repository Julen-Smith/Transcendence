{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport axiosInstance from '../axiosService';\n//import axios from 'axios';\n\n// Se encarga de recoger los datos del navegador y enviarlos al servidor\n// Home View\nfunction collectBrowserData() {\n  const data = {\n    browserName: navigator.appName,\n    browserVersion: navigator.appVersion,\n    userAgent: navigator.userAgent,\n    language: navigator.language,\n    platform: navigator.platform,\n    screenResolution: `${screen.width}x${screen.height}`\n  };\n  sendDataToServer(data);\n}\nasync function postGateway(endpoint) {\n  axiosInstance.post(endpoint, {\n    timeout: 1000\n  }).then(response => {\n    console.log(\"Succesful POST request: \", response);\n  }).catch(error => {\n    console.error(\"Error in POST request: \", error);\n  });\n}\nasync function getGateway(endpoint) {\n  try {\n    const res = await axiosInstance.get(endpoint, {\n      timeout: 1000\n    });\n    return res.data.url;\n  } catch (error) {\n    console.error(\"Error in GET request: \", error);\n    return null;\n  }\n}\n\n//HomeView @POST /login_log\nasync function sendDataToServer(data) {\n  axiosInstance.post('/log', data, {\n    timeout: 5000\n  }).then(response => {\n    console.log('Datos enviados al servidor:', response);\n  }).catch(error => {\n    console.error('Error al enviar datos:', error);\n  });\n}\n\n//RegisterView @POST /create_user\nasync function register(credentials) {\n  try {\n    const response = await axiosInstance.post('/login/register', credentials);\n    return {\n      success: true,\n      data: response.data,\n      error: null\n    };\n  } catch (error) {\n    return {\n      success: false,\n      data: null,\n      error: error.response.data.detail || 'Error desconocido.'\n    };\n  }\n}\n\n//LoginView @POST /login_user\nasync function login(credentials) {\n  try {\n    const response = await axiosInstance.post('/login/default', credentials);\n    return {\n      success: true,\n      data: response.data,\n      error: null\n    };\n  } catch (error) {\n    if (error.response.status == 428) router.push('/otp');\n    return {\n      success: false,\n      data: null,\n      error: error.response.data.detail || 'Error desconocido.'\n    };\n  }\n}\nasync function handleIntraRedirect() {\n  try {\n    // Peticion de build url al back\n    // const response = await axios.get('http://localhost:4242/api/intra');\n    // Redireccion a la url\n    window.location.href = 'http://localhost:4242/api/intra';\n  } catch (error) {\n    console.error('Error al manejar el inicio de sesión con Intra 42:', error);\n  }\n}\nexport { handleIntraRedirect, collectBrowserData, sendDataToServer, register, login, postGateway, getGateway };","map":{"version":3,"names":["router","axiosInstance","collectBrowserData","data","browserName","navigator","appName","browserVersion","appVersion","userAgent","language","platform","screenResolution","screen","width","height","sendDataToServer","postGateway","endpoint","post","timeout","then","response","console","log","catch","error","getGateway","res","get","url","register","credentials","success","detail","login","status","push","handleIntraRedirect","window","location","href"],"sources":["/Transcendence/develop/vue/volume/main/src/methods/api/login.js"],"sourcesContent":["import router from '@/router';\nimport axiosInstance from '../axiosService';\n//import axios from 'axios';\n\n\n// Se encarga de recoger los datos del navegador y enviarlos al servidor\n// Home View\nfunction collectBrowserData() {\n    const data = {\n    browserName: navigator.appName,\n    browserVersion: navigator.appVersion,\n    userAgent: navigator.userAgent,\n    language: navigator.language,\n    platform: navigator.platform,\n    screenResolution: `${screen.width}x${screen.height}`,\n  };\n  sendDataToServer(data);\n}\n\nasync function postGateway(endpoint) {\n  axiosInstance.post(endpoint, {timeout: 1000})\n  .then((response) => {\n    console.log(\"Succesful POST request: \", response);\n  })\n  .catch((error) => {\n    console.error(\"Error in POST request: \", error);\n  });\n}\n\nasync function getGateway(endpoint) {\n\n  try {\n\n    const res = await axiosInstance.get(endpoint, {timeout: 1000});\n    return res.data.url;\n\n  } catch (error) {\n\n      console.error(\"Error in GET request: \", error);\n      return null;\n\n  }\n}\n\n//HomeView @POST /login_log\nasync function sendDataToServer(data) {\n    axiosInstance.post('/log', data,  { timeout: 5000 })\n    .then((response) => {\n      console.log('Datos enviados al servidor:', response);\n    })\n    .catch((error) => {\n      console.error('Error al enviar datos:', error);\n    });\n}\n\n//RegisterView @POST /create_user\nasync function register(credentials) {\n    try {\n        const response = await axiosInstance.post('/login/register', credentials);\n        return { success: true, data: response.data, error: null };\n\n    } catch (error) {\n        return { success: false, data: null, error: error.response.data.detail || 'Error desconocido.' };\n    }\n}\n\n//LoginView @POST /login_user\nasync function login(credentials) {\n    try {\n        const response = await axiosInstance.post('/login/default', credentials);\n        return { success: true, data: response.data, error: null };\n\n    } catch (error) {\n        if (error.response.status == 428)\n            router.push('/otp');\n\n        return { success: false, data: null, error: error.response.data.detail || 'Error desconocido.' };\n    }\n}\n\nasync function handleIntraRedirect() {\n    try {\n      // Peticion de build url al back\n     // const response = await axios.get('http://localhost:4242/api/intra');\n      // Redireccion a la url\n      window.location.href = 'http://localhost:4242/api/intra';\n    \n    } catch (error) {\n      console.error('Error al manejar el inicio de sesión con Intra 42:', error);\n    }\n}\n\n\nexport { handleIntraRedirect ,collectBrowserData , sendDataToServer, register, login,\n  postGateway, getGateway};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}