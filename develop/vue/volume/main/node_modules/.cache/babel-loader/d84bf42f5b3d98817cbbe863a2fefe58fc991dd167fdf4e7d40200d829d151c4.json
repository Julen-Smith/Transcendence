{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport axios from 'axios';\nconst axiosInstance = axios.create({\n  baseURL: 'https://localhost/api/',\n  timeout: 1000 // Timeout porsiaca ya haremos pruebas\n  //headers: {'X-Custom-Header': 'foobar'} Aqui meteremos el bearer por ejemplo\n});\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('userToken');\n  if (token) {\n    config.headers['Authorization'] = 'Bearer ' + token;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nconst isTokenExpired = token => {\n  const payloadBase64 = token.split('.')[1];\n  const decodedPayload = JSON.parse(atob(payloadBase64));\n  const exp = decodedPayload.exp;\n  const now = Date.now() / 1000;\n  return exp < now;\n};\nif (token && isTokenExpired(token)) {\n  alert('Tu sesi贸n ha expirado. Por favor, inicia sesi贸n nuevamente.');\n}\naxios.interceptors.response.use(response => response, error => {\n  if (error.response.status === 401) {}\n  return Promise.reject(error);\n});\nexport default axiosInstance;","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","isTokenExpired","payloadBase64","split","decodedPayload","JSON","parse","atob","exp","now","Date","alert","response","status"],"sources":["/Transcendence/develop/vue/volume/main/src/methods/axiosService.js"],"sourcesContent":["import axios from 'axios';\n\nconst axiosInstance = axios.create({\n\n    baseURL: 'https://localhost/api/',\n    timeout: 1000 // Timeout porsiaca ya haremos pruebas\n    //headers: {'X-Custom-Header': 'foobar'} Aqui meteremos el bearer por ejemplo\n});\n\naxiosInstance.interceptors.request.use(\n    config => {\n      const token = localStorage.getItem('userToken');\n      if (token) {\n        config.headers['Authorization'] = 'Bearer ' + token;\n      }\n      return config;\n    },\n    error => {\n      return Promise.reject(error);\n    }\n  );\n\n  const isTokenExpired = (token) => {\n    const payloadBase64 = token.split('.')[1];\n    const decodedPayload = JSON.parse(atob(payloadBase64));\n    const exp = decodedPayload.exp;\n    const now = Date.now() / 1000;\n    return exp < now;\n  };\n  \n  if (token && isTokenExpired(token)) {\n    alert('Tu sesi贸n ha expirado. Por favor, inicia sesi贸n nuevamente.');\n  }\n\naxios.interceptors.response.use(response => response, error => {\n    if (error.response.status === 401) {\n    }\n    return Promise.reject(error);\n  });\n\nexport default axiosInstance;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM,CAAC;EAE/BC,OAAO,EAAE,wBAAwB;EACjCC,OAAO,EAAE,IAAI,CAAC;EACd;AACJ,CAAC,CAAC;AAEFH,aAAa,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAClCC,MAAM,IAAI;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC/C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGH,KAAK;EACrD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,MAAMG,cAAc,GAAIP,KAAK,IAAK;EAChC,MAAMQ,aAAa,GAAGR,KAAK,CAACS,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACzC,MAAMC,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAAC;EACtD,MAAMM,GAAG,GAAGJ,cAAc,CAACI,GAAG;EAC9B,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC,GAAG,IAAI;EAC7B,OAAOD,GAAG,GAAGC,GAAG;AAClB,CAAC;AAED,IAAIf,KAAK,IAAIO,cAAc,CAACP,KAAK,CAAC,EAAE;EAClCiB,KAAK,CAAC,6DAA6D,CAAC;AACtE;AAEF1B,KAAK,CAACK,YAAY,CAACsB,QAAQ,CAACpB,GAAG,CAACoB,QAAQ,IAAIA,QAAQ,EAAEd,KAAK,IAAI;EAC3D,IAAIA,KAAK,CAACc,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE,CACnC;EACA,OAAOd,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEJ,eAAeZ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}